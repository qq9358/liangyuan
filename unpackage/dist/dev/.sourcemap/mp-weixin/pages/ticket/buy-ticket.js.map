{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/Code/Self/HBuilder/liangyuan/pages/ticket/buy-ticket.vue?3753","webpack:///D:/Code/Self/HBuilder/liangyuan/pages/ticket/buy-ticket.vue?e1c7","webpack:///D:/Code/Self/HBuilder/liangyuan/pages/ticket/buy-ticket.vue?8ee5","uni-app:///pages/ticket/buy-ticket.vue","webpack:///D:/Code/Self/HBuilder/liangyuan/pages/ticket/buy-ticket.vue?acbc","webpack:///D:/Code/Self/HBuilder/liangyuan/pages/ticket/buy-ticket.vue?f489"],"names":["createPage","Page"],"mappings":"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","file":"pages/ticket/buy-ticket.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/ticket/buy-ticket.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buy-ticket.vue?vue&type=template&id=338a84ed&scoped=true&\"\nvar renderjs\nimport script from \"./buy-ticket.vue?vue&type=script&lang=js&\"\nexport * from \"./buy-ticket.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buy-ticket.vue?vue&type=style&index=0&id=338a84ed&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"338a84ed\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/ticket/buy-ticket.vue\"\nexport default component.exports","export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=template&id=338a84ed&scoped=true&\"","var components = {\n  customDateSelector: function() {\n    return import(\n      /* webpackChunkName: \"components/custom/custom-date-selector/custom-date-selector\" */ \"@/components/custom/custom-date-selector/custom-date-selector.vue\"\n    )\n  },\n  tuiNumberbox: function() {\n    return import(\n      /* webpackChunkName: \"components/thorui/tui-numberbox/tui-numberbox\" */ \"@/components/thorui/tui-numberbox/tui-numberbox.vue\"\n    )\n  },\n  customField: function() {\n    return import(\n      /* webpackChunkName: \"components/custom/custom-field/custom-field\" */ \"@/components/custom/custom-field/custom-field.vue\"\n    )\n  },\n  ticketTypeDescription: function() {\n    return import(\n      /* webpackChunkName: \"components/ticket/ticket-type-description/ticket-type-description\" */ \"@/components/ticket/ticket-type-description/ticket-type-description.vue\"\n    )\n  },\n  uniPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/uni/uni-popup/uni-popup\" */ \"@/components/uni/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.price.toFixed(2)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.showDescription = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.showTourist = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view v-if=\"pageLoaded\" ref=\"grbody\" class=\"booking\">\r\n\t\t<view class=\"booking-mod\">\r\n\t\t\t<view class=\"booking-mod-hd\"><text class=\"booking-mod-hd-title\">使用日期</text></view>\r\n\t\t\t<view class=\"booking-mod-bd\"><custom-date-selector v-model=\"input.travelDate\" :dates=\"ticketType.dailyPrices\"></custom-date-selector></view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"booking-mod\">\r\n\t\t\t<view class=\"booking-mod-around\">\r\n\t\t\t\t<view class=\"booking-multi-item\">\r\n\t\t\t\t\t<view class=\"booking-multi-item-auto\">\r\n\t\t\t\t\t\t<h3>{{ ticketType.name }}</h3>\r\n\t\t\t\t\t\t<ul class=\"booking-mod-around-label clearfix\">\r\n\t\t\t\t\t\t\t<view :class=\"refundClass\">\r\n\t\t\t\t\t\t\t\t<text :class=\"'iconfont icon-' + refundIcon\" />\r\n\t\t\t\t\t\t\t\t<text>{{ refundText }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"info right\">\r\n\t\t\t\t\t\t\t\t<text class=\"iconfont icon-passed\" />\r\n\t\t\t\t\t\t\t\t<text>入园保障</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t<p @click=\"showDescription = true\" class=\"booking-mod-around-resinfo\">购买须知></p>\r\n\t\t\t\t\t\t<p v-if=\"ticketType.minBuyNum > 1\" class=\"booking-mod-around-limited\">至少需购买{{ ticketType.minBuyNum }}份</p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view>\r\n\t\t\t\t\t\t<view class=\"booking-mod-around-price\">\r\n\t\t\t\t\t\t\t<span>¥</span>\r\n\t\t\t\t\t\t\t{{ price }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"booking-mod-around-num\"><tui-numberbox :value=\"quantity\" :min=\"minBuyNum\" :max=\"maxBuyNum\" integer @change=\"onQuantityChange\" /></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<p v-if=\"false\" class=\"booking-mod-around-tips\">\r\n\t\t\t\t\t{{ pageLabelMainText }}统一限购，同一手机号1天内在所有网络平台最多只能预订5份。如您需要重复购买，请使用其他手机号购买。\r\n\t\t\t\t</p>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"ticketType.groundChangCis.length > 0\" class=\"booking-mod\">\r\n\t\t\t<view class=\"booking-mod-hd\"><text class=\"booking-mod-hd-title\">入场时段</text></view>\r\n\t\t\t<view class=\"booking-mod-bd\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<custom-field\r\n\t\t\t\t\t\tv-for=\"groundChangCi in ticketType.groundChangCis\"\r\n\t\t\t\t\t\t:key=\"groundChangCi.groundId\"\r\n\t\t\t\t\t\t:param=\"groundChangCi\"\r\n\t\t\t\t\t\tv-model=\"groundChangCi.changCiId\"\r\n\t\t\t\t\t></custom-field>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"ticketType.touristInfoType == 3\" class=\"booking-mod\">\r\n\t\t\t<view class=\"booking-mod-hd\">\r\n\t\t\t\t<text class=\"booking-mod-hd-title\">出行人信息</text>\r\n\t\t\t\t<text class=\"booking-mod-hd-tips\">\r\n\t\t\t\t\t需填写\r\n\t\t\t\t\t<em>{{ quantity }}个</em>\r\n\t\t\t\t\t出行人\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"booking-mod-bd\">\r\n\t\t\t\t<view v-if=\"quantity == 1\">\r\n\t\t\t\t\t<custom-field v-if=\"ticketType.needTouristName\" v-model=\"firstTourist.name.vmodel\" :param=\"firstTourist.name\" />\r\n\t\t\t\t\t<custom-field v-if=\"ticketType.needTouristMobile\" v-model=\"firstTourist.mobile.vmodel\" :param=\"firstTourist.mobile\" />\r\n\t\t\t\t\t<custom-field v-if=\"ticketType.needCert\" v-model=\"firstTourist.certNo.vmodel\" :param=\"firstTourist.certNo\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"quantity > 1\" class=\"booking-tourist\">\r\n\t\t\t\t\t<view style=\"width:75px;\">出行人</view>\r\n\t\t\t\t\t<view style=\"flex:1;\">\r\n\t\t\t\t\t\t<view :border=\"false\">\r\n\t\t\t\t\t\t\t<template v-for=\"(tourist, index) in tourists\">\r\n\t\t\t\t\t\t\t\t<van-cell\r\n\t\t\t\t\t\t\t\t\tv-if=\"tourist.name || tourist.mobile || tourist.certNo\"\r\n\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\t\t\t\t\t'booking-tourist-error': errorTouristIndex == index\r\n\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"align-items: center;\"\r\n\t\t\t\t\t\t\t\t\t@click=\"onTouristEdit(index)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<p v-if=\"tourist.name\" class=\"booking-tourist-item\">{{ tourist.name }}</p>\r\n\t\t\t\t\t\t\t\t\t<p v-if=\"tourist.mobile\" class=\"booking-tourist-item\">手机号码 {{ tourist.mobile }}</p>\r\n\t\t\t\t\t\t\t\t\t<p v-if=\"tourist.certNo\" class=\"booking-tourist-item\">身份证 {{ tourist.certNo }}</p>\r\n\t\t\t\t\t\t\t\t\t<view slot=\"right-icon\" name=\"edit\" />\r\n\t\t\t\t\t\t\t\t</van-cell>\r\n\t\t\t\t\t\t\t\t<van-cell\r\n\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t:title=\"`点击添加出行人${index + 1}`\"\r\n\t\t\t\t\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\t\t\t\t\t'booking-tourist-error': errorTouristIndex == index\r\n\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t@click=\"onTouristEdit(index)\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<view slot=\"right-icon\" name=\"edit\" />\r\n\t\t\t\t\t\t\t\t</van-cell>\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"ticketType.touristInfoType == 3 && !ticketType.needTouristMobile\">\r\n\t\t\t<view class=\"booking-mod-hd\"><text class=\"booking-mod-hd-title\">联系信息</text></view>\r\n\t\t\t<view class=\"booking-mod-bd\">\r\n\t\t\t\t<view class=\"view-input\">\r\n\t\t\t\t\t<view class=\"input-label\"><text>联系手机</text></view>\r\n\t\t\t\t\t<view class=\"input-view\"><input v-model=\"input.contactMobile\" type=\"tel\" placeholder=\"请填写手机号码\" /></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"ticketType.touristInfoType == 2\" class=\"booking-mod input-group\">\r\n\t\t\t<view class=\"booking-mod-hd\">\r\n\t\t\t\t<text class=\"booking-mod-hd-title\">联系信息</text>\r\n\t\t\t\t<text class=\"booking-mod-hd-tips\">\r\n\t\t\t\t\t需填写\r\n\t\t\t\t\t<em>1个</em>\r\n\t\t\t\t\t联系人\r\n\t\t\t\t</text>\r\n\t\t\t</view>\r\n\t\t\t<custom-field v-if=\"ticketType.needTouristName\" v-model=\"input.contactName.vmodel\" :param=\"input.contactName\" />\r\n\t\t\t<custom-field v-if=\"ticketType.needTouristMobile\" v-model=\"input.contactMobile.vmodel\" :param=\"input.contactMobile\" />\r\n\t\t\t<custom-field v-if=\"ticketType.needCert\" v-model=\"input.contactCert.vmodel\" :param=\"input.contactCert\" />\r\n\t\t</view>\r\n\r\n\t\t<view class=\"body-active\">\r\n\t\t\t<view class=\"view-book\">\r\n\t\t\t\t<view class=\"book-price\">\r\n\t\t\t\t\t<text class=\"price-label\">总额：</text>\r\n\t\t\t\t\t￥{{ price.toFixed(2) }}\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"book-button\">\r\n\t\t\t\t\t<button @click=\"onSubmit\" class=\"order-button\">{{ submitText }}</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<ticket-type-description\r\n\t\t\tv-model=\"showDescription\"\r\n\t\t\t:show-buy=\"false\"\r\n\t\t\t:ticket-type-id=\"ticketType.id\"\r\n\t\t\t:ticket-type-name=\"ticketType.name\"\r\n\t\t\t:price=\"price\"\r\n\t\t\t@close=\"onDescriptionClose\"\r\n\t\t/>\r\n\r\n\t\t<uni-popup ref=\"touristPopup\" v-if=\"ticketType.touristInfoType == 3\" position=\"right\">\r\n\t\t\t<view class=\"booking-tourist-edit\">\r\n\t\t\t\t<van-nav-bar :title=\"`${editTouristTitle}出行人`\" left-text=\"返回\" left-arrow @click-left=\"showTourist = false\" />\r\n\t\t\t\t<view class=\"booking-tourist-edit-content\">\r\n\t\t\t\t\t<view :border=\"false\" style=\"border-radius: 5px;\">\r\n\t\t\t\t\t\t<input v-if=\"ticketType.needTouristName\" v-model=\"editTourist.name\" clearable label=\"姓名\" placeholder=\"须与证件上的名字一致\" />\r\n\t\t\t\t\t\t<input v-if=\"ticketType.needTouristMobile\" v-model=\"editTourist.mobile\" type=\"tel\" clearable label=\"手机号码\" placeholder=\"请填写手机号码\" />\r\n\t\t\t\t\t\t<input v-if=\"ticketType.needCert\" v-model=\"editTourist.certNo\" clearable label=\"身份证\" placeholder=\"请填写证件号码\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"booking-tourist-edit-btnbox\"><van-button @click=\"onTouristSave\">完成</van-button></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport md5 from 'md5';\r\nimport ticketTypeService from './../../services/ticketTypeService.js';\r\nimport orderService from './../../services/orderService.js';\r\nimport validate from '@/utils/validator.js';\r\nimport toastHelper from '@/utils/toastHelper.js';\r\nimport { keyboardPopupMixin } from './../../mixins/KeyboardPopupMixin.js';\r\nimport { mobileMixin } from './../../mixins/mobileMixin.js';\r\n\r\nclass Tourist {\r\n\tconstructor() {\r\n\t\tthis.name = {\r\n\t\t\tlabel: '姓名',\r\n\t\t\tvmodel: '',\r\n\t\t\tplaceholder: '须与证件上的名字一致',\r\n\t\t\tvalidTypeId: 6,\r\n\t\t\terror: false\r\n\t\t};\r\n\t\tthis.mobile = {\r\n\t\t\tlabel: '手机号码',\r\n\t\t\tvmodel: '',\r\n\t\t\tplaceholder: '请填写手机号码',\r\n\t\t\tvalidTypeId: 3,\r\n\t\t\terror: false\r\n\t\t};\r\n\t\tthis.certNo = {\r\n\t\t\tlabel: '证件号码',\r\n\t\t\tvmodel: '',\r\n\t\t\tplaceholder: '请填写证件号码',\r\n\t\t\tvalidTypeId: 6,\r\n\t\t\terror: false\r\n\t\t};\r\n\t}\r\n}\r\n\r\nexport default {\r\n\tmixins: [keyboardPopupMixin, mobileMixin],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tinput: {\r\n\t\t\t\titems: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tticketTypeId: this.ticketTypeId,\r\n\t\t\t\t\t\tquantity: 1\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\ttravelDate: '',\r\n\t\t\t\tcontactName: {\r\n\t\t\t\t\tlabel: '姓名',\r\n\t\t\t\t\tvmodel: '',\r\n\t\t\t\t\tplaceholder: '须与证件上的名字一致',\r\n\t\t\t\t\tvalidTypeId: 6,\r\n\t\t\t\t\terror: false\r\n\t\t\t\t},\r\n\t\t\t\tcontactMobile: {\r\n\t\t\t\t\tlabel: '手机号码',\r\n\t\t\t\t\tvmodel: '',\r\n\t\t\t\t\tplaceholder: '请填写手机号码',\r\n\t\t\t\t\tvalidTypeId: 3,\r\n\t\t\t\t\terror: false\r\n\t\t\t\t},\r\n\t\t\t\tcontactCert: {\r\n\t\t\t\t\tlabel: '证件号码',\r\n\t\t\t\t\tvmodel: '',\r\n\t\t\t\t\tplaceholder: '请填写证件号码',\r\n\t\t\t\t\tvalidTypeId: 6,\r\n\t\t\t\t\terror: false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tquantity: 1,\r\n\t\t\ttourists: [],\r\n\t\t\tticketType: {\r\n\t\t\t\tdailyPrices: [],\r\n\t\t\t\tgroundChangCis: []\r\n\t\t\t},\r\n\t\t\tminBuyNum: 1,\r\n\t\t\tmaxBuyNum: 1000,\r\n\t\t\tshowDescription: false,\r\n\t\t\tsaving: false,\r\n\t\t\tsubmited: false,\r\n\t\t\tshowTourist: false,\r\n\t\t\tfirstTourist: new Tourist(),\r\n\t\t\tcurrentTouristIndex: -1,\r\n\t\t\teditTourist: {},\r\n\t\t\terrorTouristIndex: -1,\r\n\t\t\tticketTypeId: 0\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\trefundClass() {\r\n\t\t\tlet className = 'info';\r\n\t\t\tif (this.ticketType.allowRefund === false) {\r\n\t\t\t\tclassName = 'error';\r\n\t\t\t} else if (this.ticketType.refundLimited) {\r\n\t\t\t\tclassName = 'warning';\r\n\t\t\t}\r\n\t\t\tlet classObj = {};\r\n\t\t\tclassObj[className] = true;\r\n\t\t\treturn classObj;\r\n\t\t},\r\n\t\trefundIcon() {\r\n\t\t\tif (this.ticketType.allowRefund === false) {\r\n\t\t\t\treturn 'close';\r\n\t\t\t}\r\n\t\t\treturn this.ticketType.refundLimited ? 'info-o' : 'passed';\r\n\t\t},\r\n\t\trefundText() {\r\n\t\t\tif (this.ticketType.allowRefund === false) {\r\n\t\t\t\treturn '不可退';\r\n\t\t\t}\r\n\t\t\treturn this.ticketType.refundLimited ? '有条件退' : '随时退';\r\n\t\t},\r\n\t\tprice() {\r\n\t\t\tconst priceObj = this.ticketType.dailyPrices.find(p => p.date == this.input.travelDate);\r\n\t\t\tlet priceResult = priceObj ? priceObj.price : 0;\r\n\t\t\treturn priceResult;\r\n\t\t},\r\n\t\ttotalMoney() {\r\n\t\t\treturn this.price * this.quantity * 100;\r\n\t\t},\r\n\t\tsubmitText() {\r\n\t\t\treturn this.totalMoney > 0 ? '去支付' : '提交订单';\r\n\t\t},\r\n\t\teditTouristTitle() {\r\n\t\t\tif (this.editTourist.name || this.editTourist.mobile || this.editTourist.certNo) {\r\n\t\t\t\treturn '编辑';\r\n\t\t\t}\r\n\t\t\treturn '新增';\r\n\t\t},\r\n\t\t...mapState(['promoterId', 'pageLabelMainText']),\r\n\t\t...mapState('orderModule', ['signKey'])\r\n\t},\r\n\twatch: {\r\n\t\t'input.travelDate': async function(val, oldVal) {\r\n\t\t\tif (!oldVal) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.ticketType.hasGroundChangCi) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tthis.loading();\r\n\r\n\t\t\t\tthis.ticketType.groundChangCis = await ticketTypeService.getTicketTypeChangCiComboboxItemsAsync(this.ticketTypeId, val);\r\n\t\t\t\tthis.setGroundChangCiDefaultValue();\r\n\t\t\t} finally {\r\n\t\t\t\tthis.loaded();\r\n\t\t\t}\r\n\t\t},\r\n\t\tquantity: function(val, oldVal) {\r\n\t\t\tif (this.ticketType.touristInfoType != 3) return;\r\n\r\n\t\t\tconst diff = val - oldVal;\r\n\t\t\tif (diff > 0) {\r\n\t\t\t\tfor (let i = 0; i < diff; i++) {\r\n\t\t\t\t\tthis.tourists.push(new Tourist());\r\n\t\t\t\t}\r\n\t\t\t\tif (val == 1) {\r\n\t\t\t\t\tthis.firstTourist = this.tourists[0];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.tourists.length += diff;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tasync onLoad(event) {\r\n\t\tthis.ticketTypeId = event.ticketTypeId;\r\n\t\tthis.input.items[0].ticketTypeId = event.ticketTypeId;\r\n\t\ttry {\r\n\t\t\tthis.loading();\r\n\r\n\t\t\tthis.ticketType = await ticketTypeService.getTicketTypeForWeiXinSaleAsync(this.ticketTypeId);\r\n\t\t\tthis.ticketType.groundChangCis.forEach(groundChangCi => {\r\n\t\t\t\tgroundChangCi.label = groundChangCi.groundName;\r\n\t\t\t\tgroundChangCi.placeholder = '请选择入场时段）';\r\n\t\t\t\tgroundChangCi.validTypeId = 9;\r\n\t\t\t\tgroundChangCi.paramSelectDtos = groundChangCi.changCiDtos.map(a => {\r\n\t\t\t\t\treturn { displayText: `${a.name}（${a.stime}:${a.etime}） 余票：${a.surplusNum}`, value: a.id.toString(), disabled: false };\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthis.minBuyNum = this.ticketType.minBuyNum > 1 ? this.ticketType.minBuyNum : 1;\r\n\t\t\tthis.maxBuyNum = this.ticketType.maxBuyNum > 1 ? this.ticketType.maxBuyNum : 1000;\r\n\t\t\tthis.quantity = this.minBuyNum;\r\n\r\n\t\t\tconst priceObj = this.ticketType.dailyPrices.find(p => !p.disable);\r\n\t\t\tif (priceObj) {\r\n\t\t\t\tthis.input.travelDate = priceObj.date;\r\n\t\t\t}\r\n\r\n\t\t\tthis.setGroundChangCiDefaultValue();\r\n\r\n\t\t\tif (this.ticketType.touristInfoType == 3) {\r\n\t\t\t\tthis.tourists.push(this.firstTourist);\r\n\t\t\t}\r\n\r\n\t\t\tthis.pageLoaded = true;\r\n\t\t} finally {\r\n\t\t\tthis.loaded();\r\n\t\t}\r\n\t},\r\n\tbeforeRouteLeave(to, from, next) {\r\n\t\tif (this.showTourist) {\r\n\t\t\tthis.showTourist = false;\r\n\t\t\tnext(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.submited || to.meta.shouldNotConfirm) {\r\n\t\t\tnext();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.$dialog\r\n\t\t\t.confirm({\r\n\t\t\t\ttitle: '确认离开订单填写页？',\r\n\t\t\t\tshowCancelButton: true,\r\n\t\t\t\tconfirmButtonText: '离开',\r\n\t\t\t\tcancelButtonText: '取消'\r\n\t\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\tnext();\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tnext(false);\r\n\t\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\tonQuantityChange(val) {\r\n\t\t\tif (val < this.minBuyNum) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.quantity = this.minBuyNum;\r\n\t\t\t\t\ttoastHelper.noneToast(`至少需购买${this.minBuyNum}份`);\r\n\t\t\t\t});\r\n\t\t\t} else if (val > this.maxBuyNum) {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tthis.quantity = this.maxBuyNum;\r\n\t\t\t\t\ttoastHelper.noneToast(`最多购买${this.maxBuyNum}份`);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.quantity = val.value;\r\n\t\t},\r\n\t\tonTouristEdit(index) {\r\n\t\t\tthis.currentTouristIndex = index;\r\n\t\t\tconst tourist = this.tourists[index];\r\n\t\t\tthis.editTourist = { ...tourist };\r\n\t\t\tthis.$refs.touristPopup.open();\r\n\t\t},\r\n\t\tonTouristSave() {\r\n\t\t\tif (!this.validateTourist(this.editTourist)) return;\r\n\r\n\t\t\tconst index = this.tourists.findIndex(t => t.certNo == this.editTourist.certNo);\r\n\t\t\tif (index >= 0 && index != this.currentTouristIndex) {\r\n\t\t\t\ttoastHelper.noneToast('身份证已添加');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.tourists[this.currentTouristIndex] = { ...this.editTourist };\r\n\t\t\tif (this.currentTouristIndex == 0) {\r\n\t\t\t\tthis.firstTourist = this.tourists[0];\r\n\t\t\t}\r\n\t\t\tthis.$refs.touristPopup.close();\r\n\t\t},\r\n\t\tasync onSubmit() {\r\n\t\t\tif (this.ticketType.groundChangCis.length > 0) {\r\n\t\t\t\tfor (const groundChangCi of this.ticketType.groundChangCis) {\r\n\t\t\t\t\tif (!groundChangCi.changCiId) {\r\n\t\t\t\t\t\tif (groundChangCi.changCis.length === 1 && groundChangCi.changCis[0].disabled) {\r\n\t\t\t\t\t\t\ttoastHelper.noneToast(groundChangCi.groundName + '暂无可售场次');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttoastHelper.noneToast('请选择' + groundChangCi.groundName + '场次');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.ticketType.touristInfoType == 3) {\r\n\t\t\t\tfor (let i = 0; i < this.tourists.length; i++) {\r\n\t\t\t\t\tconst tourist = this.tourists[i];\r\n\t\t\t\t\tif (!this.validateTourist(tourist)) {\r\n\t\t\t\t\t\tthis.errorTouristIndex = i;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.errorTouristIndex = -1;\r\n\r\n\t\t\t\tif (!this.ticketType.needTouristMobile) {\r\n\t\t\t\t\tconst validateRules = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalue: this.input.contactMobile.vmodel,\r\n\t\t\t\t\t\t\tname: '联系手机',\r\n\t\t\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isMobile' }]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t];\r\n\t\t\t\t\tlet validateResult = validate(validateRules);\r\n\t\t\t\t\tif (!validateResult.success) {\r\n\t\t\t\t\t\ttoastHelper.noneToast(validateResult.message);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.ticketType.touristInfoType == 2) {\r\n\t\t\t\tconst validateRules = [];\r\n\t\t\t\tif (this.ticketType.needTouristName) {\r\n\t\t\t\t\tvalidateRules.push({\r\n\t\t\t\t\t\tvalue: this.input.contactName.vmodel,\r\n\t\t\t\t\t\tname: '姓名',\r\n\t\t\t\t\t\trules: [{ rule: 'required' }]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (this.ticketType.needTouristMobile) {\r\n\t\t\t\t\tvalidateRules.push({\r\n\t\t\t\t\t\tvalue: this.input.contactMobile.vmodel,\r\n\t\t\t\t\t\tname: '联系手机',\r\n\t\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isMobile' }]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (this.ticketType.needCert) {\r\n\t\t\t\t\tvalidateRules.push({\r\n\t\t\t\t\t\tvalue: this.input.contactCert.vmodel,\r\n\t\t\t\t\t\tname: '身份证',\r\n\t\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isIdCard' }]\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet validateResult = validate(validateRules);\r\n\t\t\t\tif (!validateResult.success) {\r\n\t\t\t\t\ttoastHelper.noneToast(validateResult.message);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.quantity = Math.max(this.minBuyNum, this.quantity);\r\n\t\t\tthis.quantity = Math.min(this.maxBuyNum, this.quantity);\r\n\t\t\tawait this.createOrder();\r\n\t\t},\r\n\t\tsetGroundChangCiDefaultValue() {\r\n\t\t\tif (!this.ticketType.groundChangCis || this.ticketType.groundChangCis.length <= 0) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.ticketType.groundChangCis.forEach(groundChangCi => {\r\n\t\t\t\tif (groundChangCi.changCis.length == 0) {\r\n\t\t\t\t\tgroundChangCi.changCis.push({\r\n\t\t\t\t\t\tvalue: '',\r\n\t\t\t\t\t\tdisplayText: '暂无可售场次',\r\n\t\t\t\t\t\tdisabled: true\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (groundChangCi.changCis.length == 1) {\r\n\t\t\t\t\tgroundChangCi.changCiId = groundChangCi.changCis[0].value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tvalidateTourist(tourist) {\r\n\t\t\tconst rules = [];\r\n\t\t\tif (this.ticketType.needTouristName) {\r\n\t\t\t\trules.push({\r\n\t\t\t\t\tvalue: tourist.name.vmodel,\r\n\t\t\t\t\tname: '姓名',\r\n\t\t\t\t\trules: [{ rule: 'required' }]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.ticketType.needTouristMobile) {\r\n\t\t\t\trules.push({\r\n\t\t\t\t\tvalue: tourist.mobile.vmodel,\r\n\t\t\t\t\tname: '手机号码',\r\n\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isMobile' }]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.ticketType.needCert) {\r\n\t\t\t\trules.push({\r\n\t\t\t\t\tvalue: tourist.certNo.vmodel,\r\n\t\t\t\t\tname: '身份证',\r\n\t\t\t\t\trules: [{ rule: 'required' }, { rule: 'isIdCard' }]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tlet validateResult = validate(rules);\r\n\t\t\tif (!validateResult.success) {\r\n\t\t\t\ttoastHelper.noneToast(validateResult.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tasync createOrder() {\r\n\t\t\ttry {\r\n\t\t\t\tlet input = {};\r\n\t\t\t\tthis.input.items[0].quantity = this.quantity;\r\n\t\t\t\tthis.input.items[0].tourists = this.tourists.map( a=> {\r\n\t\t\t\t\treturn { name: a.name.vmodel, mobile: a.mobile.vmodel, certNo: a.certNo.vmodel}\r\n\t\t\t\t});\r\n\t\t\t\tthis.input.items[0].groundChangCis = this.ticketType.groundChangCis.map(g => {\r\n\t\t\t\t\treturn { groundId: g.groundId, changCiId: g.changCiId };\r\n\t\t\t\t});\r\n\t\t\t\tinput.promoterId = this.promoterId;\r\n\t\t\t\tinput.items = this.input.items;\r\n\t\t\t\tinput.contactName = this.input.contactName.vmodel;\r\n\t\t\t\tinput.contactMobile = this.input.contactMobile.vmodel;\r\n\t\t\t\tinput.contactCert = this.input.contactCert.vmodel;\r\n\t\t\t\tinput.travelDate = this.input.travelDate;\r\n\t\t\t\tinput.sign = md5(`${input.travelDate}${input.items[0].ticketTypeId}${input.items[0].quantity}${this.signKey}`);\r\n\r\n\t\t\t\tthis.saving = true;\r\n\t\t\t\tconst result = await orderService.createWeiXinOrderAsync(input);\r\n\t\t\t\tthis.submited = true;\r\n\t\t\t\tif (result.shouldPay) {\r\n\t\t\t\t\tuni.setStorageSync('Pay:Product', this.ticketType.name);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (result.shouldPay) {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/ticket/wx-js-pay?listNo=' + result.listNo\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\turl: '/pages/order/order-detail?listNo=' + result.listNo\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} finally {\r\n\t\t\t\tthis.saving = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDescriptionClose() {\r\n\t\t\tthis.showDescription = false;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.booking {\r\n\tpadding: 10px 6px 70px;\r\n\tbackground-color: #c0c7cf;\r\n\tmin-height: calc(100vh - 46px);\r\n\tbox-sizing: border-box;\r\n\tfont-size: 14px;\r\n\r\n\t&-mod {\r\n\t\tmargin-bottom: 10px;\r\n\r\n\t\t&-hd {\r\n\t\t\tpadding: 10px 12px;\r\n\t\t\tborder-radius: 5px 5px 0 0;\r\n\t\t\tbackground: #eff0f2;\r\n\r\n\t\t\t&-title {\r\n\t\t\t\tmargin-right: 5px;\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t\tcolor: #000;\r\n\t\t\t}\r\n\r\n\t\t\t&-tips {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tvertical-align: middle;\r\n\t\t\t\tline-height: 18px;\r\n\t\t\t\tfont-size: 13px;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t\tword-break: break-all;\r\n\r\n\t\t\t\tem {\r\n\t\t\t\t\tcolor: #f40;\r\n\t\t\t\t\tfont-style: normal;\r\n\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&-bd {\r\n\t\t\tborder-radius: 0 0 5px 5px;\r\n\t\t\tborder-bottom: solid 1px #a3aab2;\r\n\t\t\toverflow: hidden;\r\n\t\t\tbackground: #fff;\r\n\r\n\t\t\t.van-cell {\r\n\t\t\t\tpadding: 13px 15px;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&-around {\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 15px;\r\n\r\n\t\t\th3 {\r\n\t\t\t\tfont-size: 16px;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tfont-weight: 700;\r\n\t\t\t}\r\n\r\n\t\t\t&-label {\r\n\t\t\t\tmargin-top: 6px;\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\theight: 20px;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\tli {\r\n\t\t\t\t\tfloat: left;\r\n\t\t\t\t\tmargin-right: 14px;\r\n\t\t\t\t\tline-height: 20px;\r\n\r\n\t\t\t\t\t.icon {\r\n\t\t\t\t\t\tvertical-align: middle;\r\n\t\t\t\t\t\tmargin-right: 2px;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tspan {\r\n\t\t\t\t\t\tdisplay: inline-block;\r\n\t\t\t\t\t\tvertical-align: middle;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.iconfont {\r\n\t\t\t\t\tfont-size: 13px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.warning {\r\n\t\t\t\t\tcolor: #ffae13;\r\n\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\tcolor: #ffae13;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.info {\r\n\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\tcolor: #19a0f0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.right {\r\n\t\t\t\t\tpadding: 0px 0px 0px 15px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.error {\r\n\t\t\t\t\tcolor: #ff2f39;\r\n\t\t\t\t\t.iconfont {\r\n\t\t\t\t\t\tcolor: #ff2f39;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&-resinfo {\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\tcolor: #19a0f0;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t}\r\n\r\n\t\t\t&-limited {\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t\tline-height: 20px;\r\n\t\t\t}\r\n\r\n\t\t\t&-price {\r\n\t\t\t\ttext-align: right;\r\n\t\t\t\tcolor: #f40;\r\n\t\t\t\tfont-size: 21px;\r\n\r\n\t\t\t\tspan {\r\n\t\t\t\t\tfont-size: 15px;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti {\r\n\t\t\t\t\tfont-size: 21px;\r\n\t\t\t\t\tmargin-right: 1px;\r\n\t\t\t\t\tline-height: 21px;\r\n\t\t\t\t\tfont-style: normal;\r\n\t\t\t\t\tfont-weight: 400;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&-num {\r\n\t\t\t\t.tui-numberbox {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/deep/ .tui-numberbox__input {\r\n\t\t\t\t\tmargin: 0;\r\n\t\t\t\t\theight: 33px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&-tips {\r\n\t\t\t\tmargin: 5px -15px 0 -15px;\r\n\t\t\t\tpadding: 10px 15px;\r\n\t\t\t\tbackground-color: #fff7e0;\r\n\t\t\t\tfont-size: 12px;\r\n\t\t\t\tcolor: #481a03;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t&-multi {\r\n\t\t&-item {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t&-auto {\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.changCi {\r\n\t\t/deep/ .input .van-cell__title {\r\n\t\t\tmax-width: 40%;\r\n\t\t}\r\n\t}\r\n\r\n\t&-tourist {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-left: 15px;\r\n\r\n\t\t.van-cell__title {\r\n\t\t\tcolor: #999;\r\n\t\t}\r\n\r\n\t\t.van-cell__value {\r\n\t\t\tline-height: 16px;\r\n\t\t}\r\n\r\n\t\t.view {\r\n\t\t\tcolor: #19a0f0;\r\n\t\t}\r\n\r\n\t\t&-error {\r\n\t\t\tbackground-color: #fffdf2;\r\n\r\n\t\t\t.booking-tourist-item,\r\n\t\t\t.van-cell__title {\r\n\t\t\t\tcolor: #ff2f39;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&-item {\r\n\t\t\tdisplay: inline-block;\r\n\t\t\tvertical-align: middle;\r\n\t\t\twidth: 100%;\r\n\t\t\tfont-size: 14px;\r\n\t\t\tcolor: #333;\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\r\n\t\t&-edit {\r\n\t\t\twidth: 100vw;\r\n\t\t\theight: 100vh;\r\n\t\t\tbackground-color: #c0c7cf;\r\n\r\n\t\t\t&-content {\r\n\t\t\t\tpadding: 10px 6px;\r\n\t\t\t\toverflow-y: auto;\r\n\t\t\t}\r\n\r\n\t\t\t&-btnbox {\r\n\t\t\t\tpadding: 10px;\r\n\r\n\t\t\t\t.van-button {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tline-height: 44px;\r\n\t\t\t\t\tfont-size: 18px;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tbackground-color: #ff9a14;\r\n\t\t\t\t\tborder: 1px solid #ff9a14;\r\n\t\t\t\t\tletter-spacing: 1px;\r\n\t\t\t\t\tborder-radius: 5px;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.top-radius {\r\n\t\tborder-top-left-radius: 5px;\r\n\t\tborder-top-right-radius: 5px;\r\n\t}\r\n\r\n\t.bottom-radius {\r\n\t\tborder-bottom-left-radius: 5px;\r\n\t\tborder-bottom-right-radius: 5px;\r\n\t}\r\n\r\n\t.body-active {\r\n\t\tbottom: 0;\r\n\t\t.view-book {\r\n\t\t\tbackground-color: #fff;\r\n\t\t}\r\n\t}\r\n\r\n\t.input-group {\r\n\t\tborder-radius: 5px;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.tui-numbox {\r\n\t\twidth: 111px;\r\n\t}\r\n}\r\n</style>\n","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=style&index=0&id=338a84ed&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy-ticket.vue?vue&type=style&index=0&id=338a84ed&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594723526718\n      var cssReload = require(\"D:/Code/Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}